name = "molt-worker"
main = "src/worker.ts"
compatibility_date = "2026-02-16"
compatibility_flags = ["nodejs_compat"]

[triggers]
crons = ["*/30 * * * *"]

# Service Bindings - zero-latency Worker-to-Worker calls
# NOTE: Uncomment when these workers are deployed to the same account
# [[services]]
# binding = "AI_COFOUNDER"
# service = "ai-cofounder"
#
# [[services]]
# binding = "SKILL_FORGE"
# service = "skill-forge"

# Durable Objects
[[durable_objects.bindings]]
name = "VOICE_SESSION"
class_name = "VoiceSessionDO"

[[migrations]]
tag = "v1"
new_classes = ["VoiceSessionDO"]

# D1 Database
[[d1_databases]]
binding = "DB"
database_name = "molt-db"
database_id = "938e1445-041e-4fbe-8d63-f35c7bd18f69"

# KV Namespace
[[kv_namespaces]]
binding = "CACHE"
id = "32172873f2374d129aae2278364ff797"

# R2 Bucket
[[r2_buckets]]
binding = "STORAGE"
bucket_name = "molt-storage"

[vars]
BASEMENT_TUNNEL_URL = "https://brain.bill-burkey.workers.dev"
